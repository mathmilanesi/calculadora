<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora de Pre√ßos</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body {
      background-color: #121212;
      color: #fff;
      padding-top: 100px;
    }

    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .card {
      background-color: #1e1e1e;
      border: none;
      padding: 20px;
      border-radius: 10px;
      color: #fff;
      min-width: 320px;
      width: 100%;
      max-width: 400px;
    }

    .form-control {
      background-color: #333;
      border: none;
      color: #fff;
      margin-bottom: 10px;
    }

    .btn-custom {
      background-color: #28a745;
      color: white;
      width: 100%;
      font-size: 1.1em;
      padding: 10px;
    }

    .btn-custom:hover {
      background-color: #218838;
    }

    .titulo {
      font-size: 1.5em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-check-label {
      font-size: 1.1em;
      margin-left: 5px;
    }

    .form-check-input {
      transform: scale(1.5);
      margin-right: 10px;
    }

    #infoParceria {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #0dcaf0;
      color: #000;
      padding: 15px 25px;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 9999;
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }

    #infoParceria.show {
      display: block;
      opacity: 1;
    }

    .log-container {
      max-height: 400px;
      overflow-y: auto;
    }

    /* Modal personalizado para o tema escuro */
    .modal-content {
      background-color: #1e1e1e;
      color: white;
    }

    .modal-header {
      border-bottom: 1px solid #333;
    }

    .modal-title {
      color: white;
    }

    .modal-footer button {
      color: white;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
      }

      .titulo {
        font-size: 1.3em;
      }
    }
  </style>
</head>
<body>
  <!-- Notifica√ß√£o visual melhorada -->
  <div id="infoParceria" class="text-center">
    <!-- Conte√∫do ser√° inserido via JavaScript -->
  </div>

  <div class="container">
    <!-- Calculadora -->
    <div class="card p-4">
      <h4 class="titulo"><i class="fas fa-shopping-cart"></i> Calculadora de Pre√ßos</h4>
      <div class="mt-3">
        <label>üõ°Ô∏è Colete</label>
        <input type="number" class="form-control" id="colete" value="0" />
        <label>üí£ C4</label>
        <input type="number" class="form-control" id="c4" value="0" />
        <label>üîó Algema</label>
        <input type="number" class="form-control" id="algema" value="0" />
        <label>üé≠ Capuz</label>
        <input type="number" class="form-control" id="capuz" value="0" />
        <label>ü§ê Morda√ßa</label>
        <input type="number" class="form-control" id="mordaca" value="0" />
        <label>üéó Corda</label>
        <input type="number" class="form-control" id="corda" value="0" />
        <label>üìü Tablet</label>
        <input type="number" class="form-control" id="tablet" value="0" />
      </div>
      <button class="btn btn-custom mt-3" onclick="calcularTotal()">Calcular Total</button>

      <!-- Checkbox com destaque -->
      <div class="form-check mt-3">
        <input class="form-check-input" type="checkbox" id="parceriaToggle" />
        <label class="form-check-label" for="parceriaToggle">Com Parceria?</label>
      </div>

      <h5 class="mt-3 text-center" id="total">Total: R$0,00</h5>
      <h6 class="mt-2 text-center text-success" id="valorVendedor">Vendedor Recebe (30%): R$0,00</h6>
    </div>

    <!-- Tabela de Pre√ßos -->
    <div class="card p-4">
      <h4 class="titulo"><i class="fas fa-chart-bar"></i> Tabela de Pre√ßos</h4>
      <table class="table table-dark table-striped text-center">
        <thead>
          <tr>
            <th>Produto</th>
            <th>Sem Parceria</th>
            <th>Com Parceria</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>üõ°Ô∏è Colete</td><td>R$3.500,00</td><td>R$3.000,00</td></tr>
          <tr><td>üí£ C4</td><td>R$4.500,00</td><td>R$4.500,00</td></tr>
          <tr><td>üîó Algema</td><td>R$3.500,00</td><td>R$3.000,00</td></tr>
          <tr><td>üé≠ Capuz</td><td>R$3.500,00</td><td>R$3.000,00</td></tr>
          <tr><td>ü§ê Morda√ßa</td><td>R$6.000,00</td><td>R$5.000,00</td></tr>
          <tr><td>üéó Corda</td><td>R$6.000,00</td><td>R$5.000,00</td></tr>
          <tr><td>üìü Tablet</td><td>R$9.000,00</td><td>R$8.000,00</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Log de Vendas -->
    <div class="card p-4 mt-4">
      <h4 class="titulo"><i class="fas fa-file-invoice"></i> Log de Vendas</h4>
      <div class="log-container">
        <table class="table table-dark table-striped text-center">
          <thead>
            <tr>
              <th>Data / Hora</th>
              <th>Total</th>
              <th>Ger√™ncia (30%)</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="logVendas">
            <!-- As vendas ser√£o listadas aqui -->
          </tbody>
        </table>
      </div>
      <button class="btn btn-danger mt-3" onclick="confirmarLimpeza()">Limpar Logs</button>
    </div>
  </div>

  <!-- Modal de confirma√ß√£o de exclus√£o -->
  <div class="modal fade" id="modalConfirmacaoLimpeza" tabindex="-1" aria-labelledby="modalConfirmacaoLimpezaLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalConfirmacaoLimpezaLabel">Confirmar Limpeza de Logs</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          Voc√™ tem certeza que deseja limpar todos os logs de vendas?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-danger" onclick="limparLogs()">Confirmar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("contextmenu", (event) => event.preventDefault());
    document.addEventListener("keydown", (event) => {
      if (
        event.key === "F12" ||
        (event.ctrlKey && event.shiftKey && event.key === "I") ||
        (event.ctrlKey && event.key === "U")
      ) {
        event.preventDefault();
      }
    });

    // Fun√ß√£o para carregar logs ao carregar a p√°gina
    window.onload = () => {
      const logs = localStorage.getItem("logs") ? JSON.parse(localStorage.getItem("logs")) : [];
      logs.forEach(addLog);
    };

    function calcularTotal() {
      let a = document.getElementById("parceriaToggle").checked,
        b = {
          colete: a ? 3000 : 3500,
          c4: a ? 2500 : 3000,
          algema: a ? 3000 : 3500,
          capuz: a ? 3000 : 3500,
          mordaca: a ? 5000 : 6000,
          corda: a ? 5000 : 6000,
          tablet: a ? 8000 : 9000,
        },
        c = 0;
      for (let d in b) {
        let e = parseInt(document.getElementById(d).value) || 0;
        c += e * b[d];
      }
      document.getElementById("total").innerText = "Total: R$" + c.toLocaleString("pt-BR", { minimumFractionDigits: 2 });

      let vendedorRecebe = c * 0.30;
      document.getElementById("valorVendedor").innerText = "Vendedor Recebe (30%): R$" + vendedorRecebe.toLocaleString("pt-BR", { minimumFractionDigits: 2 });

      // Mostrar a notifica√ß√£o tempor√°ria
      showInfoNotification(c, vendedorRecebe);

      // Salvar log
      salvarLog();
    }

    function showInfoNotification(valor, valor30) {
      const infoBox = document.getElementById("infoParceria");
      let valorFormatado = valor.toLocaleString("pt-BR", { minimumFractionDigits: 2 });
      let valor30Formatado = valor30.toLocaleString("pt-BR", { minimumFractionDigits: 2 });

      infoBox.innerText = `Total: R$${valorFormatado} | Vendedor Recebe (30%): R$${valor30Formatado}`;
      infoBox.classList.add("show");
      setTimeout(() => infoBox.classList.remove("show"), 5000);
    }

    function addLog(log) {
      const table = document.getElementById("logVendas");
      const row = table.insertRow(0);
      const dataHoraCell = row.insertCell(0);
      const totalCell = row.insertCell(1);
      const gerenciaCell = row.insertCell(2);
      const statusCell = row.insertCell(3);

      dataHoraCell.textContent = log.dataHora;
      totalCell.textContent = log.total;
      gerenciaCell.textContent = log.gerencia;
      statusCell.textContent = log.status;
    }

    function salvarLog() {
      const total = document.getElementById("total").innerText.replace("Total: R$", "").trim();
      const valorVendedor = document.getElementById("valorVendedor").innerText.replace("Vendedor Recebe (30%): R$", "").trim();
      const status = document.getElementById("parceriaToggle").checked ? "Com Parceria" : "Sem Parceria";
      const dataHora = new Date().toLocaleString();

      const log = { dataHora, total, gerencia: valorVendedor, status };
      const logs = localStorage.getItem("logs") ? JSON.parse(localStorage.getItem("logs")) : [];
      logs.push(log);
      localStorage.setItem("logs", JSON.stringify(logs));

      addLog(log);
    }

    function confirmarLimpeza() {
      const modal = new bootstrap.Modal(document.getElementById("modalConfirmacaoLimpeza"));
      modal.show();
    }

    function limparLogs() {
      localStorage.removeItem("logs");
      document.getElementById("logVendas").innerHTML = "";
      const modal = bootstrap.Modal.getInstance(document.getElementById("modalConfirmacaoLimpeza"));
      modal.hide();
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
